{% extends 'base.html' %}

{% block title %}创建讨论主题{% endblock %}

<script>
// 创建星空背景
document.addEventListener('DOMContentLoaded', function() {
    const starryBg = document.getElementById('starry-bg');
    const starsCount = 150;

    for (let i = 0; i < starsCount; i++) {
        const star = document.createElement('div');
        star.className = 'star';

        // 随机位置
        const x = Math.random() * 100;
        const y = Math.random() * 100;

        // 随机大小
        const size = Math.random() * 2 + 1;

        // 随机闪烁延迟
        const delay = Math.random() * 5;

        // 随机透明度
        const opacity = Math.random() * 0.5 + 0.1;

        star.style.left = x + '%';
        star.style.top = y + '%';
        star.style.width = size + 'px';
        star.style.height = size + 'px';
        star.style.opacity = opacity;
        star.style.animationDelay = delay + 's';

        starryBg.appendChild(star);
    }
});
</script>

{% block extra_css %}
<style>
    .starry-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #0a0a1a;
        z-index: -1;
        overflow: hidden;
    }
    .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle 2s infinite ease-in-out;
    }
    @keyframes twinkle {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
    }
    
    /* 星空背景下的文字颜色 */
    .card {
        color: #e0e0e0;
    }
    .text-white, .text-light {
        color: #e0e0e0 !important;
    }
    .text-muted {
        color: #b0b0b0 !important;
    }
    
    /* 表单标签和输入框文字颜色 */
    .form-label, .form-control {
        color: #e0e0e0 !important;
    }
    .form-control::placeholder {
        color: #c8c8c8 !important;
    }

    /* 浅色模式样式 */
    :root:not(.dark) .starry-bg {
        background: #ffffff !important;
    }
    
    :root:not(.dark) .star {
        display: none;
    }
    
    :root:not(.dark) .card {
        color: #000000;
        background: rgba(255, 255, 255, 0.9) !important;
        border: 1px solid rgba(0, 0, 0, 0.1) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
    }
    
    :root:not(.dark) .card:hover {
        background: rgba(255, 255, 255, 0.98) !important;
        box-shadow: 0 20px 45px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(100, 115, 255, 0.2) !important;
        border-color: rgba(100, 115, 255, 0.4) !important;
    }
    
    /* 深色模式卡片悬浮效果 */
    .card {
        transition: all 0.3s ease;
    }
    
    .card:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 35px rgba(100, 115, 255, 0.3), 0 0 0 1px rgba(100, 115, 255, 0.1);
        border-color: rgba(100, 115, 255, 0.4) !important;
    }
    
    :root:not(.dark) .text-white,
    :root:not(.dark) .text-light,
    :root:not(.dark) .card h3,
    :root:not(.dark) .form-label,
    :root:not(.dark) .form-control {
        color: #000000 !important;
    }
    
    :root:not(.dark) .text-muted,
    :root:not(.dark) .form-control::placeholder {
        color: #444444 !important;
    }
    
    :root:not(.dark) .form-control {
        background: rgba(255, 255, 255, 0.8) !important;
        border: 1px solid rgba(0, 0, 0, 0.2) !important;
    }
    
    :root:not(.dark) .form-control:focus {
        background: rgba(255, 255, 255, 0.95) !important;
        border-color: rgba(100, 115, 255, 0.5) !important;
        box-shadow: 0 0 0 0.2rem rgba(100, 115, 255, 0.25) !important;
    }
    
    :root:not(.dark) .btn-secondary {
        background: rgba(108, 117, 125, 0.8) !important;
        border: 1px solid rgba(108, 117, 125, 0.3) !important;
        color: #ffffff !important;
    }
    
    :root:not(.dark) .btn-primary {
        background: rgba(100, 115, 255, 0.8) !important;
        border: 1px solid rgba(100, 115, 255, 0.3) !important;
        color: #ffffff !important;
    }
</style>
{% endblock %}

{% block content %}
<div class="starry-bg" id="starry-bg"></div>
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card rounded shadow-sm" style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px);">
            <div class="card-header" style="background: rgba(100, 115, 255, 0.2); border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                <h3 class="mb-0"><i class="bi bi-pencil-square"></i> 创建讨论主题</h3>
            </div>
            <div class="card-body p-5">
                <form method="POST">
                    {{ form.hidden_tag() }}
                    <div class="mb-4">
                        {{ form.title.label(class="form-label fw-bold") }}
                        {{ form.title(class="form-control", style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); backdrop-filter: blur(5px);", placeholder="输入讨论主题标题") }}
                        {% if form.title.errors %}
                        <div class="text-danger mt-1">
                            {% for error in form.title.errors %}
                            <small>{{ error }}</small><br>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="mb-4">
                        {{ form.content.label(class="form-label fw-bold") }}
                    {{ form.content(class="form-control", rows=10, style="background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2); backdrop-filter: blur(5px);", placeholder="输入讨论主题内容") }}
                        {% if form.content.errors %}
                        <div class="text-danger mt-1">
                            {% for error in form.content.errors %}
                            <small>{{ error }}</small><br>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('discussions') }}" class="btn btn-secondary" style="background: rgba(108, 117, 125, 0.8); border: 1px solid rgba(108, 117, 125, 0.3); backdrop-filter: blur(5px);">取消</a>
                        {{ form.submit(class="btn btn-primary", style="background: rgba(100, 115, 255, 0.8); border: 1px solid rgba(100, 115, 255, 0.3); backdrop-filter: blur(5px);") }}
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}